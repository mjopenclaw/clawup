# x.yaml - X (Twitter) ì±„ë„ ì–´ëŒ‘í„°

channel:
  id: x
  name: "X (Twitter)"
  description: "X í”Œë«í¼ ìë™í™” - í¬ìŠ¤íŒ…, ì¸ê²Œì´ì§€ë¨¼íŠ¸, ì„±ì¥"
  enabled: true

  # === ì¸ì¦ ì„¤ì • ===
  auth:
    method: "browser"
    profile_name: "default"
    login_url: "https://twitter.com/login"
    home_url: "https://twitter.com/home"

  # === ì½˜í…ì¸  ì„¤ì • ===
  content:
    max_length: 280
    min_length: 20
    tone_ref: "casual"
    language: "ko"

    hashtags:
      enabled: true
      max_count: 3
      position: "end"
      preferred: ["#AI", "#OpenClaw", "#ìë™í™”", "#í…Œí¬"]

    media:
      images_allowed: true
      max_images: 4
      videos_allowed: true
      max_video_length_seconds: 140
      supported_formats: ["jpg", "png", "gif", "mp4", "webp"]

    thread:
      supported: true
      max_posts: 10
      connector: "ğŸ§µ"
      numbering_format: "{n}/"         # 1/, 2/, 3/

  # === ì•¡ì…˜ ì •ì˜ ===
  actions:
    post:
      enabled: true
      script: "core/scripts/browser/x/post.ts"
      bounds_ref: "sns.posting"
      pre_checks:
        - "shared/validator/similarity"
        - "shared/validator/forbidden"
      require_review: false

      # í¬ìŠ¤íŒ… ê·œì¹™
      rules:
        # ê¸¸ë©´ ìŠ¤ë ˆë“œë¡œ
        - condition: "length > 280"
          action: "split_to_thread"
        # í•´ì‹œíƒœê·¸ ìë™ ì¶”ê°€
        - condition: "hashtag_count == 0 AND topic != null"
          action: "add_hashtags"

    like:
      enabled: true
      script: "core/scripts/browser/x/like.ts"
      daily_limit: 50
      cooldown_minutes: 1
      selector: '[data-testid="like"]'

    follow:
      enabled: true
      script: "core/scripts/browser/x/follow.ts"
      daily_limit: 20
      cooldown_minutes: 5
      selector: '[data-testid="follow"]'
      filter:
        min_followers: 10
        exclude_bots: true
        exclude_spam: true

    follow_back:
      enabled: true
      script: "core/scripts/browser/x/follow.ts"
      filter: "not_bot AND followers > 10"
      delay_minutes: 30
      daily_limit: 20

    reply:
      enabled: true
      script: "core/scripts/browser/x/reply.ts"
      use_llm: true
      daily_limit: 30
      tone_ref: "casual"
      max_length: 280
      selector: '[data-testid="reply"]'

      # ë‹µê¸€ ê·œì¹™
      rules:
        - trigger: "mention"
          action: "respond"
          style: "helpful"
        - trigger: "question"
          action: "answer"
          style: "informative"

    repost:
      enabled: true
      script: "core/scripts/browser/x/repost.ts"
      daily_limit: 10
      quality_threshold: 0.7
      selector: '[data-testid="retweet"]'
      filter:
        min_likes: 100
        topics: ["AI", "tech", "startup"]

    quote:
      enabled: true
      script: "core/scripts/browser/x/quote.ts"
      use_llm: true
      daily_limit: 5

    check_notifications:
      enabled: true
      script: "core/scripts/browser/x/notifications.ts"
      check_interval_minutes: 15
      url: "https://twitter.com/notifications"

  # === ë©”íŠ¸ë¦­ ì •ì˜ ===
  metrics:
    tracked:
      - id: "followers"
        name: "íŒ”ë¡œì›Œ"
        query: "SELECT x_followers FROM daily_stats ORDER BY date DESC LIMIT 1"
      - id: "following"
        name: "íŒ”ë¡œì‰"
        query: "SELECT x_following FROM daily_stats ORDER BY date DESC LIMIT 1"
      - id: "tweets"
        name: "íŠ¸ìœ— ìˆ˜"
        query: "SELECT COUNT(*) FROM posts WHERE platform = 'x'"
      - id: "engagement_rate"
        name: "ì°¸ì—¬ìœ¨"
        query: "SELECT AVG(engagement_rate) FROM post_analytics WHERE platform = 'x' AND posted_at > date('now', '-7 days')"
      - id: "impressions"
        name: "ë…¸ì¶œ"
        query: "SELECT SUM(views) FROM post_analytics WHERE platform = 'x' AND posted_at > date('now', '-7 days')"

    collection:
      schedule: "0 */6 * * *"          # 6ì‹œê°„ë§ˆë‹¤
      method: "browser_scrape"

  # === íƒ€ê²ŸíŒ… ì„¤ì • ===
  targeting:
    follow_targets:
      interests: ["AI", "tech", "startup", "coding", "productivity"]
      min_followers: 100
      max_followers: 50000
      verified_preferred: false
      language: "ko"

    engagement_targets:
      topics: ["AI", "GPT", "automation", "coding", "startup"]
      exclude_topics: ["politics", "religion", "controversy"]
      prefer_recent: true              # ìµœê·¼ í¬ìŠ¤íŠ¸ ì„ í˜¸

  # === í¬ë¡œìŠ¤ í¬ìŠ¤íŒ… ===
  cross_posting:
    source_channels: []
    target_channels: ["threads"]
    adapt_content: true
    delay_minutes: 30

  # === íŠ¹ìˆ˜ ê¸°ëŠ¥ ===
  features:
    # ìŠ¤ë ˆë“œ ì˜ˆì•½
    scheduled_threads:
      enabled: true
      preview_before_post: true

    # ë¶„ì„
    analytics:
      enabled: true
      track_impressions: true
      track_engagement: true

    # ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬
    lists:
      enabled: false

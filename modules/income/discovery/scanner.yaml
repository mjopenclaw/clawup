# scanner.yaml - ìˆ˜ìµ ê¸°íšŒ ë°œê²¬ ìŠ¤ìºë„ˆ
# ìƒˆë¡œìš´ ìˆ˜ìµ ê¸°íšŒë¥¼ ìë™ìœ¼ë¡œ íƒìƒ‰

discovery:
  id: opportunity-scanner
  name: "ê¸°íšŒ ë°œê²¬ ìŠ¤ìºë„ˆ"
  description: "ìƒˆë¡œìš´ ìˆ˜ìµ ê¸°íšŒë¥¼ ìë™ìœ¼ë¡œ íƒìƒ‰í•˜ê³  í‰ê°€"

  # === ìŠ¤ì¼€ì¤„ ===
  schedule:
    cron: "0 10 * * 1"                 # ë§¤ì£¼ ì›”ìš”ì¼ ì˜¤ì „ 10ì‹œ
    timezone: "Asia/Seoul"
    enabled: true

  # === ìŠ¤ìº” ì†ŒìŠ¤ ===
  sources:
    # í”„ë¦¬ëœìŠ¤ í”Œë«í¼
    - id: "freelance_platforms"
      name: "í”„ë¦¬ëœìŠ¤ í”Œë«í¼"
      platforms:
        - name: "Upwork"
          url: "https://www.upwork.com"
          search_keywords: ["AI automation", "Claude", "GPT", "chatbot"]
          categories: ["AI Services", "Virtual Assistant", "Data Entry"]

        - name: "Fiverr"
          url: "https://www.fiverr.com"
          search_keywords: ["AI", "automation", "chatbot"]

      evaluation:
        min_hourly_rate: 30
        prefer_remote: true
        avoid_long_commitment: true

    # ì½˜í…ì¸  í”Œë«í¼
    - id: "content_platforms"
      name: "ì½˜í…ì¸  í”Œë«í¼"
      platforms:
        - name: "Medium"
          partner_program: true
          niche_topics: ["AI", "Automation", "Productivity"]

        - name: "Substack"
          monetization: "subscription"
          potential_topics: ["AI newsletter", "Tech trends"]

    # ì–´í•„ë¦¬ì—ì´íŠ¸ í”„ë¡œê·¸ë¨
    - id: "affiliate_programs"
      name: "ì–´í•„ë¦¬ì—ì´íŠ¸"
      programs:
        - name: "Amazon Associates"
          categories: ["Tech", "Books", "Software"]

        - name: "SaaS Affiliates"
          companies: ["Notion", "Zapier", "Airtable"]

    # ë§ˆì´í¬ë¡œ íƒœìŠ¤í¬
    - id: "micro_tasks"
      name: "ë§ˆì´í¬ë¡œ íƒœìŠ¤í¬"
      platforms:
        - name: "Amazon Mechanical Turk"
        - name: "Appen"
        - name: "Clickworker"
      filter:
        min_hourly_equivalent: 10

  # === í‰ê°€ ê¸°ì¤€ ===
  evaluation:
    criteria:
      - factor: "automation_potential"
        weight: 0.3
        description: "ì–¼ë§ˆë‚˜ ìë™í™” ê°€ëŠ¥í•œê°€"
        scoring:
          high: "ëŒ€ë¶€ë¶„ ìë™í™” ê°€ëŠ¥"
          medium: "ì¼ë¶€ ìˆ˜ë™ ì‘ì—… í•„ìš”"
          low: "ëŒ€ë¶€ë¶„ ìˆ˜ë™"

      - factor: "passive_income_potential"
        weight: 0.25
        description: "íŒ¨ì‹œë¸Œ ì¸ì»´ ê°€ëŠ¥ì„±"
        scoring:
          high: "í•œ ë²ˆ ì„¤ì • í›„ ì§€ì† ìˆ˜ìµ"
          medium: "ì£¼ê¸°ì  ê´€ë¦¬ í•„ìš”"
          low: "ì‹œê°„ íˆ¬ì… ë¹„ë¡€ ìˆ˜ìµ"

      - factor: "initial_effort"
        weight: 0.2
        description: "ì´ˆê¸° ì„¤ì • ë…¸ë ¥"
        scoring:
          low: "ê°„ë‹¨í•œ ì„¤ì •"
          medium: "ì¼ì£¼ì¼ ì •ë„ ì„¤ì •"
          high: "í•œ ë‹¬ ì´ìƒ ì¤€ë¹„"

      - factor: "estimated_roi"
        weight: 0.15
        description: "ì˜ˆìƒ ROI"
        scoring:
          high: "ì›” $100+"
          medium: "ì›” $30-100"
          low: "ì›” $30 ë¯¸ë§Œ"

      - factor: "risk_level"
        weight: 0.1
        description: "ìœ„í—˜ë„"
        scoring:
          low: "ê±°ì˜ ë¬´ìœ„í—˜"
          medium: "ì•½ê°„ì˜ ì‹œê°„/ëˆ íˆ¬ì"
          high: "ìƒë‹¹í•œ íˆ¬ì í•„ìš”"

    # ìµœì†Œ ì ìˆ˜
    min_score: 0.6

  # === ë°œê²¬ í”„ë¡œì„¸ìŠ¤ ===
  process:
    steps:
      - name: "scan_sources"
        description: "ê° ì†ŒìŠ¤ì—ì„œ ê¸°íšŒ ìˆ˜ì§‘"
        output: "raw_opportunities"

      - name: "filter_duplicates"
        description: "ì´ë¯¸ í‰ê°€í•œ ê¸°íšŒ ì œì™¸"
        output: "new_opportunities"

      - name: "evaluate_opportunities"
        description: "í‰ê°€ ê¸°ì¤€ì— ë”°ë¼ ì ìˆ˜ ì‚°ì •"
        output: "scored_opportunities"

      - name: "rank_and_filter"
        description: "ì ìˆ˜ ê¸°ë°˜ ì •ë ¬ ë° í•„í„°ë§"
        filter: "score >= ${evaluation.min_score}"
        output: "qualified_opportunities"

      - name: "generate_report"
        description: "ë°œê²¬ ë³´ê³ ì„œ ìƒì„±"
        output: "discovery_report"

  # === ë³´ê³ ì„œ ===
  report:
    template: |
      # ğŸ’° ìˆ˜ìµ ê¸°íšŒ ë°œê²¬ ë³´ê³ ì„œ

      > ìŠ¤ìº” ì¼ì‹œ: {scan_date}

      ## ğŸ“Š ìš”ì•½
      - ë°œê²¬ëœ ê¸°íšŒ: {total_found}ê°œ
      - ì ê²© ê¸°íšŒ: {qualified_count}ê°œ
      - í‰ê·  ì ìˆ˜: {avg_score}

      ## ğŸ† ìƒìœ„ ê¸°íšŒ

      {top_opportunities}

      ## ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„
      {next_steps}

    output:
      - type: "markdown"
        path: "memory/discovery-report.md"
      - type: "telegram"
        send_to: "${config.telegram.monitor.chat_id}"

  # === ìë™ í–‰ë™ ===
  auto_actions:
    # ì ìˆ˜ ë†’ì€ ê¸°íšŒ ìë™ ë¶ë§ˆí¬
    - condition: "score >= 0.8"
      action: "add_to_priority_list"

    # ìƒˆ ìˆ˜ìµì› ì¶”ê°€ ì œì•ˆ
    - condition: "score >= 0.7 AND is_new_category"
      action: "propose_new_source"
      require_approval: true

  # === ì•ˆì „ ì„¤ì • ===
  safety:
    # ê¸ˆì§€ëœ ì¹´í…Œê³ ë¦¬
    forbidden_categories:
      - "gambling"
      - "mlm"
      - "adult"
      - "crypto_scam"

    # ìµœëŒ€ ì´ˆê¸° íˆ¬ì
    max_initial_investment_usd: 50

    # ìŠ¹ì¸ í•„ìš” ì¡°ê±´
    require_approval_for:
      - "any_signup"
      - "any_payment"
      - "api_key_creation"

  # === ë¡œê¹… ===
  logging:
    log_scans: true
    log_path: "data/discovery_log.json"
